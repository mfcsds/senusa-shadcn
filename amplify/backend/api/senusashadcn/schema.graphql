type VariantReport @model @auth(rules: [{allow: public}]) {
  id: ID!
  status: String
  create_at: String
  isApproved: Boolean
  medical_history: String
  current_diagnosis: String
  userID: ID! @index(name: "byUser")
  download_link_report: String
  institutionID: ID! @index(name: "byInstitution")
}

type PatientDocuments @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  patientID: ID! @index(name: "byPatient")
  size: Int
  link: AWSURL
}

type Patient @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  sex: String
  phone_number: String
  dob: String
  institutionID: ID! @index(name: "byInstitution")
  PatientDokuments: [PatientDocuments] @hasMany(indexName: "byPatient", fields: ["id"])
}

type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  institutionID: ID! @index(name: "byInstitution")
  role_type: Int
  email: String
  Category: String
  Specialty: String
  VariantReports: [VariantReport] @hasMany(indexName: "byUser", fields: ["id"])
}

type Institution @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  contact: String
  address: String
  subscription_type: String
  email: String
  Users: [User] @hasMany(indexName: "byInstitution", fields: ["id"])
  Patients: [Patient] @hasMany(indexName: "byInstitution", fields: ["id"])
  userQuotas: Int
  currentUserQuota: Int
  storageQuota: String
  registrationDate: String
  accountStatus: Boolean
  VariantReports: [VariantReport] @hasMany(indexName: "byInstitution", fields: ["id"])
}
 
type GeneticsConselor @model @auth(rules: [{allow: public}, {allow: groups, groups: ["Level2"], operations: [read, create, update, delete]}, {allow: groups, groups: ["Admin"], operations: [read, create, update, delete]}]) {
  id: ID!
  text: String
  variantreportID: ID! @index(name: "byVariantReport")
}

type Phenotype @model @auth(rules: [{allow: public}]) {
  id: ID!
  PhenotypeCode: String
  Description: String
}

type Conclusion @model @auth(rules: [{allow: public}]) {
  id: ID!
  text: String
}

type Recommendation @model @auth(rules: [{allow: public}]) {
  id: ID!
  text: String
  variantreportID: ID! @index(name: "byVariantReport")
}

type VariantReport @model @auth(rules: [{allow: public}, {allow: groups, groups: ["Admin"], operations: [read, create, update, delete]}, {allow: groups, groups: ["Level1"], operations: [read, create, update, delete]}, {allow: groups, groups: ["Level2"], operations: [read, create, update, delete]}]) {
  id: ID!
  status: String
  create_at: String
  isApproved: Boolean
  medical_history: String
  current_diagnosis: String
  userID: ID! @index(name: "byUser")
  download_link_report: String
  institutionID: ID! @index(name: "byInstitution")
  Recommendations: [GeneticsConselor] @hasMany(indexName: "byVariantReport", fields: ["id"])
  GeneticsConselors: [GeneticsConselor] @hasMany(indexName: "byVariantReport", fields: ["id"])
}

type PatientDocuments @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  patientID: ID! @index(name: "byPatient")
  size: Int
  link: AWSURL
}

type Patient @model @auth(rules: [{allow: public}, {allow: groups, groups: ["Level1"], operations: [read, create, update, delete]}]) {
  id: ID!
  name: String
  sex: String
  phone_number: String
  dob: String
  institutionID: ID! @index(name: "byInstitution")
  PatientDokuments: [PatientDocuments] @hasMany(indexName: "byPatient", fields: ["id"])
}

type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  institutionID: ID! @index(name: "byInstitution")
  role_type: Int
  email: String
  Category: String
  Specialty: String
  VariantReports: [VariantReport] @hasMany(indexName: "byUser", fields: ["id"])
}

type Institution @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String
  contact: String
  address: String
  subscription_type: String
  email: String
  Users: [Patient] @hasMany(indexName: "byInstitution", fields: ["id"])
  Patients: [Patient] @hasMany(indexName: "byInstitution", fields: ["id"])
  userQuotas: Int
  currentUserQuota: Int
  storageQuota: String
  registrationDate: String
  accountStatus: Boolean
  VariantReports: [Patient] @hasMany(indexName: "byInstitution", fields: ["id"])
}
 